#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "[husky] pre-commit: format staged, lint, typecheck, tests"

# Allow bypass via SKIP_HOOKS=1
if [ "$SKIP_HOOKS" = "1" ]; then
  echo "[husky] hooks skipped via SKIP_HOOKS"
  exit 0
fi

npx --no lint-staged || exit 1

npm run lint || exit 1
npm run typecheck || exit 1
# Optional: fast tests
npm run test --silent || exit 1
